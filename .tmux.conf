### --- Prefix ---
set -g prefix C-b
unbind C-b
bind C-b send-prefix
# Correct terminal setting for Kitty
set -g default-terminal "tmux-256color"

# Let tmux forward 24-bit color to Neovim
set -as terminal-overrides ',*:Tc'


### --- Reload Config Easily ---
unbind r
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

### --- Sensible Defaults ---
set -g mouse on
set -g history-limit 10000
set -g allow-rename off
setw -g mode-keys vi
setw -g automatic-rename off
set-option -g set-titles on
set-option -g set-titles-string '#T'

### --- Status Bar (Minimal + Clear) ---
set -g status-interval 5
set -g status-keys vi
set -g status-left-length 60
set -g status-right-length 90
set -g status-justify centre

set -g status-left "#[fg=green]#S"
set -g status-right "#[fg=cyan]%Y-%m-%d #[fg=white]%H:%M"

### --- Vim/Neovim-aware Pane Navigation ---
set -g @is_vim "ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

bind -n C-h if-shell "$(@is_vim)" 'send-keys C-h' 'select-pane -L'
bind -n C-j if-shell "$(@is_vim)" 'send-keys C-j' 'select-pane -D'
bind -n C-k if-shell "$(@is_vim)" 'send-keys C-k' 'select-pane -U'
bind -n C-l if-shell "$(@is_vim)" 'send-keys C-l' 'select-pane -R'

bind -n C-\ if-shell "$(@is_vim)" 'send-keys C-\\' 'select-pane -l'

### --- Copy Mode (Vim-like) ---
bind -T copy-mode-vi 'C-h' select-pane -L
bind -T copy-mode-vi 'C-j' select-pane -D
bind -T copy-mode-vi 'C-k' select-pane -U
bind -T copy-mode-vi 'C-l' select-pane -R
bind -T copy-mode-vi 'C-\' select-pane -l

### --- Splits ---
bind | split-window -h
bind - split-window -v

### --- Pane Resize with Vim Keys ---
bind -r h resize-pane -L 5
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind m resize-pane -Z  # Toggle zoom

### --- Clipboard Copy (macOS / Linux X11) ---
# Uncomment one of these if desired
# set-option -g set-clipboard on          # macOS / auto
# bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"     # macOS
# bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -in -selection clipboard"  # Linux

### --- Optional: TPM (Tmux Plugin Manager) ---
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# run '~/.tmux/plugins/tpm/tpm'

